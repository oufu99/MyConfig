<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover">
<link rel="stylesheet" href="../assets/css/zpui.css"/>
<link rel="stylesheet" href="../assets/css/aclrw.css"/>
<script src="../assets/js/page.js"></script>

    <title>签到</title>
</head>
<body>
<div class="page">
    <div class="page-hd">
        <div class="header bor-1px-b">
    <div class="header-left">
        <a href="javascript:history.go(-1)" class="left-arrow"></a>
    </div>
    <div class="header-title">签到</div>
    <div class="header-right">
        <a href="#"></a>
    </div>
</div>
    </div>
    <div class="page-bd">
        <!-- 页面内容-->
        <div class="mg-15">
            <div class="card">
               <div class="card-er pd-card">
                   <div class="smll">
                        <div class="weui-cell__bd">
                            <div class="fs-24">本月累计签到</div>
                            <div class="smll">
                                 <div class="mg-20 font-w600 fs-40 card-tyr weui-cell__bd"><span class="fs-72" id="sign-count">20</span>天</div>
                                 <div class="weui-cell__hd"  id="signIn">
                                    <div class=" wentwe color-33" id="sign-txt"><span class="border-rer">签到</span></div>
                                </div>
                            </div>
                            <div class="fs-24 mg-t10">您本月已经获取20000积分了，请继续加油！</div>
                        </div>
                        
                   </div>
               </div>
            </div>
            <div class="weui-cells border-20">
                <div class="weui-cell">
                    <div class="weui-cell__bd">
                       <div class="Calendar">
                            <div id="toyear" class="flex flex-pack-center">
                                <div id="idCalendarPre"></div>
                                <div class="year-month">
                                    <span id="idCalendarYear">2018</span>年<span id="idCalendarMonth">6</span>月
                                </div>
                                <div id="idCalendarNext"></div>
                            </div>
                            <table  cellpadding="0" cellspacing="0">
                                <thead>
                                    <tr class="tou">
                                        <td>日</td>
                                        <td>一</td>
                                        <td>二</td>
                                        <td>三</td>
                                        <td>四</td>
                                        <td>五</td>
                                        <td>六</td>
                                    </tr>
                                </thead>
                                <tbody id="idCalendar">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="weui-cells border-20">
                <div class="weui-cell">
                   <div class="weui-cell__bd"><span class="fs-34 color-33 font-w600">签到规则</span></div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__bd">
                        <div class="fs-26 color-33 font-w600">使用须知</div>
                        <div class="fs-24 color-9 mg-t10 mg-b10">
                            <p>1.只限本人使用，不得转赠他人</p>
                            <p>2.此卡一个月仅限使用十次，十次之内享受5折优惠
                                       超过十次后享受九五折</p>
                            <p>3.结算时必须向客服出示此卡</p>
                            <p>4.此卡期限未1年，1年后需要重新申请</p>
                        </div>
                    </div>
                </div>
            </div>
  
        </div>
    </div>

</div>
<script src="../assets/js/lib/jquery-2.1.4.js"></script>
<script src="../assets/js/jquery-weui.min.js"></script>
<script src="../assets/js/lib/fastclick.js"></script>
<script>
  $(function() {
    FastClick.attach(document.body);
  });
</script>
<script src="../assets/js/Swiper-4.0.7/swiper.min.js"></script>
<script src="../assets/js/rili.js"></script>

<script language="JavaScript">
	var isSign = false;
	var myday = new Array(); //已签到的数组
			// myday[0] = "1528646400"
			// myday[1] = "1528387200"
			// myday[2] = "1825708800"
            myday[0] = "1544387200"
			myday[1] = "1544487200"
			myday[2] = "1544587200"

	var cale = new Calendar("idCalendar", {
		qdDay: myday,
		onToday: function(o) {
			o.className = "onToday";
		},
		onSignIn: function (){
			$$("sign-txt").innerHTML = '<span class="border-rer">签到</span>';
		},
		onFinish: function() {
			$$("sign-count").innerHTML = myday.length //已签到次数
			$$("idCalendarYear").innerHTML = this.Year;
			$$("idCalendarMonth").innerHTML = this.Month; //表头年份

		}
	});
	$$("idCalendarPre").onclick = function() {
		cale.PreMonth();
	}
	$$("idCalendarNext").onclick = function() {
		cale.NextMonth();
	}
	//添加今天签到
	$$("signIn").onclick = function() {
		if(isSign == false) {
			var res = cale.SignIn();
			if(res == '1') {
				$$("sign-txt").innerHTML = '<span class="border-rer bocke-we">签到</span>';
				$$("sign-count").innerHTML = parseInt($$("sign-count").innerHTML) + 1;
				isSign = true;
			} else if (res == '2'){
				$$("sign-txt").innerHTML = '<span class="border-rer">签到</span>';
				alert('今天已经签到了')
			}
		} else {
			alert('今天已经签到了')
		}

	}
</script>

</body>
</html>