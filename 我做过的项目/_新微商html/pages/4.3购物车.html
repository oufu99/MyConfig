<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover">
<link rel="stylesheet" href="../assets/css/zpui.css"/>
<link rel="stylesheet" href="../assets/css/all.css"/>
<script src="../assets/js/page.js"></script>

  <title> 购物车 </title>
</head>
<body>
<div class="page">
  <div class="allselect_bar">
    <div class="left"><span class="allr"><i class="icon_rd"></i>全选</span><span class="text-muted fs24">当前购物车共12件商品</span></div>
    <div class="right">
      <i class="icon_remove"></i>
    </div>
  </div>
  <div class="page-bd">
    <!-- 页面内容-->
    <div class="cart_goods-list list_type">
      <ul>

        <li class="goods-list_item">
          <div class="pro_box">
            <div class="rdbox"><i class="icon_rd"></i></div>
            <div class="pro_img" style="background-image: url('../assets/images/pro266x200.jpg')"></div>
            <div class="pro_text">
              <h4 class="pro_title">小米（MI）小米手环3代NFC版</h4>
              <div class="pro_gg" style="opacity: 0">规格:黄色-38码</div>
              <div class="weui-flex mt10">
                <div class="weui-flex__item">
                  <span class="price">¥<b>29.00</b></span>
                </div>
                <div>
                  <div class="count">
                    <div class="count_btn count_minus"></div>
                    <input value="0" type="text" class="count_number">
                    <div class="count_btn count_plus"></div>
                  </div>
                </div>
              </div>

            </div>
          </div>
          <div class="bor-1px-t buy_box">
            <div class="gg_box">
              <div class="gg_group">
                <div class="gg_group__hd">颜色</div>
                <div class="gg_group__bd">
                  <label class="label"><span>红色</span></label>
                  <label class="label active"><span>黄色</span></label>
                  <label class="label"><span>绿色</span></label>
                </div>
              </div>
              <div class="gg_group">
                <div class="gg_group__hd">规格</div>
                <div class="gg_group__bd">
                  <label class="label"><span>S</span></label>
                  <label class="label"><span>M</span></label>
                  <label class="label active"><span>L</span></label>
                  <label class="label"><span>XL</span></label>
                </div>
              </div>
            </div>
            <div class="btn_box">
              <span class="btn1">取消</span>
              <span class="addbtn">加入购物车</span>
            </div>
          </div>
        </li>

        <li class="goods-list_item">
          <div class="pro_box">
            <div class="rdbox"><i class="icon_rd"></i></div>
            <div class="pro_img" style="background-image: url('../assets/images/pro266x200.jpg')"></div>
            <div class="pro_text">
              <h4 class="pro_title">定制版Ninebot 九号平衡车 智能电动体感车</h4>
              <div class="pro_gg" style="opacity: 0">规格:黄色-38码</div>
              <div class="weui-flex mt10">
                <div class="weui-flex__item">
                  <span class="price">¥<b>29.00</b></span>
                </div>
                <div>
                  <div class="count">
                    <div class="count_btn count_minus"></div>
                    <input value="0" type="text" class="count_number">
                    <div class="count_btn count_plus"></div>
                  </div>
                </div>
              </div>

            </div>
          </div>
          <div class="bor-1px-t buy_box">
            <div class="gg_box">
              <div class="gg_group">
                <div class="gg_group__hd">颜色</div>
                <div class="gg_group__bd">
                  <label class="label"><span>红色</span></label>
                  <label class="label active"><span>黄色</span></label>
                  <label class="label"><span>绿色</span></label>
                </div>
              </div>
              <div class="gg_group">
                <div class="gg_group__hd">规格</div>
                <div class="gg_group__bd">
                  <label class="label"><span>S</span></label>
                  <label class="label"><span>M</span></label>
                  <label class="label active"><span>L</span></label>
                  <label class="label"><span>XL</span></label>
                </div>
              </div>
            </div>
            <div class="btn_box">
              <span class="btn1">取消</span>
              <span class="addbtn">加入购物车</span>
            </div>
          </div>
        </li>

        <li class="goods-list_item">
          <div class="pro_box">
            <div class="rdbox"><i class="icon_rd checked"></i></div>
            <div class="pro_img" style="background-image: url('../assets/images/pro266x200.jpg')"></div>
            <div class="pro_text">
              <h4 class="pro_title">米家电磁炉 双向火力控制</h4>
              <div class="pro_gg" style="opacity: 0">规格:黄色-38码</div>
              <div class="weui-flex mt10">
                <div class="weui-flex__item">
                  <span class="price">¥<b>29.00</b></span>
                </div>
                <div>
                  <div class="count">
                    <div class="count_btn count_minus"></div>
                    <input value="0" type="text" class="count_number">
                    <div class="count_btn count_plus"></div>
                  </div>
                </div>
              </div>

            </div>
          </div>
          <div class="bor-1px-t buy_box">
            <div class="gg_box">
              <div class="gg_group">
                <div class="gg_group__hd">颜色</div>
                <div class="gg_group__bd">
                  <label class="label"><span>红色</span></label>
                  <label class="label active"><span>黄色</span></label>
                  <label class="label"><span>绿色</span></label>
                </div>
              </div>
              <div class="gg_group">
                <div class="gg_group__hd">规格</div>
                <div class="gg_group__bd">
                  <label class="label"><span>S</span></label>
                  <label class="label"><span>M</span></label>
                  <label class="label active"><span>L</span></label>
                  <label class="label"><span>XL</span></label>
                </div>
              </div>
            </div>
            <div class="btn_box">
              <span class="btn1">取消</span>
              <span class="addbtn">加入购物车</span>
            </div>
          </div>
        </li>

      </ul>
    </div>
  </div>
  <div class="bottom_btn_wrap">
    <div class="weui-flex">
      <div class="weui-flex__item" style="padding-left: 0.12rem;"><span class="text-muted fs24">共5件商品合计：</span><span class="price">￥<b>378.00</b></span></div>
      <div>
        <span class="jiesubtn">结算</span>
      </div>
    </div>
  </div>
</div>

<script src="../assets/js/lib/jquery-2.1.4.js"></script>
<script src="../assets/js/jquery-weui.min.js"></script>
<script>
  // 显示隐藏取消按钮
  $(".search_top input").on('focus', function () {
    $(".search_top").find('.weui-cell__ft').show();
  });
  $(".search_top input").on('blur', function () {
    setTimeout(function () {
      $(".search_top").find('.weui-cell__ft').hide();
    },10)
  });
  // 清空搜索框
  $(".search_top").find('.weui-cell__ft').on('click', function () {
    $(".search_top .weui-input").val('');
  });

  // 规格选择
  $(".gg_group label").on('click', function () {
    $(this).siblings().removeClass('active');
    $(this).addClass('active');
  });


  /* 选择数量*/
  var MAX = 99, MIN = 0;
  $('.count_minus').click(function (e) {
    var $input = $(e.currentTarget).parent().find('.count_number');
    var number = parseInt($input.val() || "0") - 1
    if (number < MIN) number = MIN;
    $input.val(number);

    var gg = $(this).parents('.goods-list_item').find('.buy_box');
    var ggsh = $(this).parents('.goods-list_item').find('.pro_gg');
    var cinp = $(this).parents('.goods-list_item').find('.count_number');
    var minus = $(this).parents('.goods-list_item').find('.count_minus');
    if(number<1){
      gg.hide();
      cinp.hide();
      minus.hide();
      ggsh.css('opacity', 0);
    }
  })
  $('.count_plus').click(function (e) {
    var $input = $(e.currentTarget).parent().find('.count_number');
    var number = parseInt($input.val() || "0") + 1
    if (number > MAX) number = MAX;
    $input.val(number);

    // 如果数量大于0,就出现规格选择
    var gg = $(this).parents('.goods-list_item').find('.buy_box');
    var ggsh = $(this).parents('.goods-list_item').find('.pro_gg');
    var cinp = $(this).parents('.goods-list_item').find('.count_number');
    var minus = $(this).parents('.goods-list_item').find('.count_minus');
    console.log(gg);
    if(number>0){
      gg.show();
      cinp.show();
      minus.show();
      ggsh.css('opacity', 1);
    }
  })
  
  $(".goods-list_item").on('click','.icon_rd', function () {
    if($(this).hasClass('checked')){
      $(this).removeClass('checked');
    } else{
      $(this).addClass('checked');
    }
  });

  // 全选

  $('.allr').on('click', '.icon_rd', function () {
    if($(this).hasClass('checked')){
      $(this).removeClass('checked');
      $(".goods-list_item").find('.icon_rd').removeClass('checked');
    } else{
      $(this).addClass('checked');
      $(".goods-list_item").find('.icon_rd').addClass('checked');
    }
  });

</script>
</body>
</html>